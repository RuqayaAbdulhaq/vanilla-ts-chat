(()=>{"use strict";class t{widgetType;chatWidget;chatMessagesContainer;phoneImg='<img id="chat-header-icon" src="https://chat-widget-ts.vercel.app/phone.png"/>';sendImg='<img  id="chat-header-icon" src="https://chat-widget-ts.vercel.app/send.png"/>';constructor(t,e){this.widgetType=e,this.chatWidget=this.createChatWidget(t,e),document.body.appendChild(this.chatWidget),this.chatMessagesContainer=this.chatWidget.querySelector("#chat-messages"),this.initializeEventListeners(e)}createChatWidget(t,e){const i=document.createElement("div");i.id="chat-widget",i.style.cssText=`\n      position: fixed; bottom: 20px; ${t.includes("right")?"right":"left"}: 20px; \n      z-index: 1000;`,i.innerHTML=this.getWidgetHTML(t,e);const n=this.getIconWidget(e);return i.appendChild(n),i}getWidgetHTML(t,e){const i=`\n      display: none; flex-direction: column-reverse; position: absolute; bottom: 60px; \n      width: 250px; height: 350px; background: #fff; \n      box-shadow: 0 0 10px rgba(0,0,0,0.2); padding: 10px; \n      right: ${"bottom-right"===t?"0":"auto"};\n      left: ${"bottom-left"===t?"0":"auto"};`,n="position: relative; flex-direction: column-reverse; display: flex; height: 90%;",s="position: absolute; width: 100%; padding: 5px 10px; background-color: #30a4f8; color: white; border: none; cursor: pointer; top: 0;",a='<div style="flex-direction: column; display: flex; overflow-y: auto; max-height: 80%;" id="chat-messages"></div>';let l="";if("calling-small"!==this.widgetType)switch(e){case"text-option-call":l=`\n          <div id="chat-body" style="${i}">\n            ${this.getInputWidget("none","call")}\n            ${this.getInputWidget("flex","chat")}\n            <div id="chat-container" style="${n}">\n              ${a}\n              <button style="${s}" id="switch-widget-btn">\n                ${this.phoneImg}\n              </button>\n            </div>\n          </div>\n          `;break;case"text-only":l=`\n          <div id="chat-body" style="${i}">\n            ${this.getInputWidget("flex","chat")}\n            <div id="chat-container" style="${n}">\n              ${a}\n            </div>\n          </div>\n          `;break;case"call-option-text":l=`\n            <div id="chat-body" style="${i}">\n                ${this.getInputWidget("flex","call")}\n                ${this.getInputWidget("none","chat")}\n                <div id="chat-container" style="${n}">\n                  ${a}\n                  <button style="${s}" id="switch-widget-btn">\n                    ${this.sendImg}\n                  </button>\n                </div>\n            </div>\n          `;break;case"call-only":l=`\n            <div id="chat-body" style="${i}">\n              ${this.getInputWidget("flex","call")}\n            </div>\n          `}return l}getInputWidget=(t,e)=>{let i="";const n="align-items: center;",s="flex: 1; padding: 5px; margin-right: 10px;",a="padding: 5px 10px; background-color: #30a4f8; color: white; border: none; cursor: pointer;";switch(e){case"chat":i=`\n          <div id="input-container" style="display: ${t}; ${n}">\n            <input type="text" id="chat-user-input" placeholder="Type your message..." style="${s}">\n            <button id="chat-send-btn" style="${a}">Send</button>\n          </div>\n        `;break;case"call":i=`\n          <div id="input-container-call" style="display: ${t}; ${n}">\n            <input type="text" id="call-user-input" placeholder="Phone or schedule.." style="${s}">\n            <button id="chat-call-btn" style="${a}">Call</button>\n          </div>\n        `}return i};getIconWidget=t=>{const e=document.createElement("img");return e.src="https://chat-widget-ts.vercel.app/"+("calling-small"===t?"phone.png":"chat.png"),e.alt="chat.png",e.id="chat-widget-icon",e.style.cursor="pointer",e};initializeEventListeners(t){this.chatWidget.addEventListener("click",(e=>{const i=e.target;if("chat-send-btn"===i.id){const t=this.chatWidget.querySelector("#chat-user-input"),e=t.value;this.sendMessage(e,!0),t.value="",this.sendMessage("hi,we'll be with you right away!",!1)}else if("chat-call-btn"===i.id)this.initiateCall();else if("switch-widget-btn"===i.id||"chat-header-icon"===i.id){const t=document.querySelector("#switch-widget-btn"),e=document.querySelector("#input-container"),i=document.querySelector("#input-container-call"),n=document.getElementById("chat-messages");"none"!==e.style.display?(e.style.display="none",n.innerHTML="",i.style.display="flex",t&&(t.innerHTML=this.sendImg)):(e.style.display="flex",n.innerHTML="",i.style.display="none",t&&(t.innerHTML=this.phoneImg)),i.querySelector("#call-user-input").value="",e.querySelector("#chat-user-input").value=""}else if("chat-widget-icon"===i.id)if("calling-small"===t)this.initiateCall();else{const t=document.querySelector("#chat-body");t&&(t.style.display="none"===t.style.display?"flex":"none")}}))}initiateCall(){alert("Initiating call...")}sendMessage(t,e){const i=document.createElement("div");i.style.cssText=`\n      margin-bottom: 10px; padding: 10px; border-radius: 5px; \n      max-width: 80%; background-color: ${e?"#30a4f8":"#f2f2f2"}; color: ${e?"white":"#333"}; \n      align-self: ${e?"flex-start":"flex-end"};`,i.textContent=t,this.chatMessagesContainer.appendChild(i)}}if(document.currentScript){let e="bottom-right",i="text-only";const n=document.querySelector("script[chat-data-position]");n&&(e=n.getAttribute("chat-data-position")||"bottom-right",i=n.getAttribute("widget-type")||"text-only"),new t(e,i)}})();